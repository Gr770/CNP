on_birth_child = {
	events = {
		ctpname.999
		ctpname.998
		ctpname.997
		ctpname.996
		ctpname.500
	}
}
on_death = {
	on_actions = {
		on_arabic_death
		on_norse_death
	}
}
on_norse_death = {
	trigger = {
		has_culture_group = culture_group:north_germanic_group
	}
	events = {
		ctpname.400
		norsenamepack.001
		norsenamepack.002
	}
}
on_arabic_death = {
	trigger = {
		has_culture_group = culture_group:arabic_group
	}
	events = {
		ctpname.995
		ctpname.994
		ctpname.993
		ctpname.992
		ctpname.400
		ctpname.001
	}
}
on_game_start = {
	on_actions = {
		on_867_start
	}
	events = {
		ctpname.002
		ctpname.003
		ctpname.004
		ctpname.005
		ctpname.007
		ctpname.008
		ctpname.009
		ctpname.010
	}
}
on_867_start = {
	effect = {
		867_persian_start_up_effect = yes
	}
}
on_game_start_after_lobby = {
	on_actions = {
		ctp_courtiers_2
	}
}
on_character_culture_change = {
	on_actions = {
		split_packs_stuff
	}
}
split_packs_stuff = {
	trigger = {
		has_character_flag = name_pack_support
		NOR = {
			AND = {
				has_culture_group = culture_group:north_germanic_group
				has_character_flag = norse_pack_support
			}
			AND = {
				has_culture_group = culture_group:arabic_group
				has_character_flag = arabic_pack_support
			}
		}
	}
	effect = {
		remove_character_flag = name_pack_support
	}
}
ctp_courtiers_2 = {
	effect = {
		every_living_character = {
			limit = {
				save_temporary_scope_as = to_be_checked
				OR = {
					is_courtier = yes
					highest_held_title_tier = tier_barony
				}
				NOT = {
					has_character_flag = name_pack_support
					AND = {
						exists = dynasty
						dynasty = {
							any_in_list = {
								variable = name_pack_support_dynasty
								this = scope:to_be_checked
							}
						}
					}
					any_in_global_list = {
						variable = name_pack_support_global
						this = scope:to_be_checked
					}
					any_close_family_member = {
						is_landed = yes
					}
				}
				NAND = {
					exists = primary_spouse
					primary_spouse = {
						is_landed = yes
					}
				}
				is_ctp_supported_culture = yes
			}
			if = {
				limit = {
					is_male = yes
					has_culture_group = culture_group:north_germanic_group
				}
				norse_pack_name_ai_male = yes
			}
			else_if = {
				limit = {
					is_male = no
					has_culture_group = culture_group:north_germanic_group
				}
				norse_pack_name_ai_female = yes
			}
			else_if = {
				limit = {
					is_male = yes
					has_culture_group = culture_group:arabic_group
				}
				arabic_pack_name_ai_male = yes
			}
			else_if = {
				limit = {
					is_male = no
					has_culture_group = culture_group:arabic_group
				}
				arabic_pack_name_ai_female = yes
			}
		}
	}
}
ctp_courtiers = {
	trigger = {
		save_temporary_scope_as = to_be_checked
		OR = {
			is_courtier = yes
			highest_held_title_tier = tier_barony
		}
		NOT = {
			has_character_flag = name_pack_support
			AND = {
				exists = dynasty
				dynasty = {
					any_in_list = {
						variable = name_pack_support_dynasty
						this = scope:to_be_checked
					}
				}
			}
			any_in_global_list = {
				variable = name_pack_support_global
				this = scope:to_be_checked
			}
			any_close_family_member = {
				is_landed = yes
			}
		}
		NAND = {
			exists = primary_spouse
			primary_spouse = {
				is_landed = yes
			}
		}
		is_ctp_supported_culture = yes
	}
	effect = {
		if = {
			limit = {
				is_male = yes
				has_culture_group = culture_group:north_germanic_group
			}
			norse_pack_name_ai_male = yes
		}
		else_if = {
			limit = {
				is_male = no
				has_culture_group = culture_group:north_germanic_group
			}
			norse_pack_name_ai_female = yes
		}
		else_if = {
			limit = {
				is_male = yes
				has_culture_group = culture_group:arabic_group
			}
			arabic_pack_name_ai_male = yes
		}
		else_if = {
			limit = {
				is_male = no
				has_culture_group = culture_group:arabic_group
			}
			arabic_pack_name_ai_female = yes
		}
	}
}
random_yearly_everyone_pulse = {
	on_actions = {
		ctp_courtiers
	}
}